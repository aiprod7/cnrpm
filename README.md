<div align="center">
<img width="1200" height="475" alt="GHBanner" src="https://github.com/user-attachments/assets/0aa67016-6eaf-458a-adb2-6e31a0763ed6" />
</div>

# VoxLux - –ì–æ–ª–æ—Å–æ–≤–æ–π –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç —Å Google Gemini

[![Version](https://img.shields.io/badge/version-1.4.0-blue.svg)](https://github.com/aiprod7/cnrpm)
[![Branch](https://img.shields.io/badge/branch-gemini-green.svg)](https://github.com/aiprod7/cnrpm/tree/gemini)
[![License](https://img.shields.io/badge/license-MIT-orange.svg)](LICENSE)

VoxLux ‚Äî —ç—Ç–æ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π –≥–æ–ª–æ—Å–æ–≤–æ–π –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç —Å **–ø–æ—Ç–æ–∫–æ–≤–æ–π —Ç—Ä–∞–Ω—Å–∫—Ä–∏–±–∞—Ü–∏–µ–π –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏** —á–µ—Ä–µ–∑ **Gemini Live API** (native audio mode). –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –ø–æ—Å–ª–µ–¥–Ω–∏–µ –º–æ–¥–µ–ª–∏ Google Gemini –¥–ª—è STT –∏ TTS, —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–∞–∫ Telegram Mini App —Å –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω—ã–º –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ–º —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–π –º–∏–∫—Ä–æ—Ñ–æ–Ω–∞.

> **–¢–µ–∫—É—â–∞—è –≤–µ—Ä—Å–∏—è**: v1.4.0 (–≤–µ—Ç–∫–∞ `gemini`)  
> üéâ **–ù–æ–≤–æ–µ**: –ù–∞—Ç–∏–≤–Ω—ã–π –∞—É–¥–∏–æ-—Ä–µ–∂–∏–º —Å –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–π –∑–∞–¥–µ—Ä–∂–∫–æ–π —Ç—Ä–∞–Ω—Å–∫—Ä–∏–±–∞—Ü–∏–∏!  
> –î–ª—è OpenRouter –≤–µ—Ä—Å–∏–∏ –ø–µ—Ä–µ–∫–ª—é—á–∏—Ç–µ—Å—å –Ω–∞ –≤–µ—Ç–∫—É [`main`](https://github.com/aiprod7/cnrpm/tree/main)

## üé§ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- **üéôÔ∏è –ü–æ—Ç–æ–∫–æ–≤–∞—è —Ç—Ä–∞–Ω—Å–∫—Ä–∏–±–∞—Ü–∏—è –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏**: –ò—Å–ø–æ–ª—å–∑—É–µ—Ç **Gemini Live API** —Å –º–æ–¥–µ–ª—å—é `gemini-2.5-flash-native-audio-preview` –¥–ª—è –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–π –∑–∞–¥–µ—Ä–∂–∫–∏ STT
- **üîä –°–∏–Ω—Ç–µ–∑ —Ä–µ—á–∏ (TTS)**: –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω—É—é —Ä–µ—á—å —á–µ—Ä–µ–∑ **Gemini 2.5 Flash Preview TTS** —Å –≥–æ–ª–æ—Å–æ–º **Kore**
- **üì± Telegram Mini App**: –ù–∞—Ç–∏–≤–Ω–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Telegram –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤
- **üîê –ò–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω–æ–µ –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ**: MicrophoneManager –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç –ø–æ–≤—Ç–æ—Ä–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã –¥–æ—Å—Ç—É–ø–∞ –∫ –º–∏–∫—Ä–æ—Ñ–æ–Ω—É (Telegram Storage API + localStorage)
- **‚ö° –î–≤—É—Ö—Ä–µ–∂–∏–º–Ω—ã–π –≤–≤–æ–¥**: –ì–æ–ª–æ—Å–æ–≤–æ–π (Live API) –∏ —Ç–µ–∫—Å—Ç–æ–≤—ã–π —Ä–µ–∂–∏–º—ã –æ–±—â–µ–Ω–∏—è
- **üé® –í–∏–∑—É–∞–ª–∏–∑–∞—Ç–æ—Ä –∑–≤—É–∫–∞**: –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∞—è –∞–Ω–∏–º–∞—Ü–∏—è –≤–æ –≤—Ä–µ–º—è –∑–∞–ø–∏—Å–∏ –∏ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è
- **üîó N8N –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è**: –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –≤–Ω–µ—à–Ω–∏–º workflow —á–µ—Ä–µ–∑ n8n

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Node.js 16+
- Google Gemini API –∫–ª—é—á ([–ø–æ–ª—É—á–∏—Ç—å –∑–¥–µ—Å—å](https://aistudio.google.com/apikey))

### –õ–æ–∫–∞–ª—å–Ω–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞

1. **–ö–ª–æ–Ω–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π**:
   ```bash
   git clone https://github.com/aiprod7/cnrpm.git
   cd cnrpm
   git checkout gemini
   ```

2. **–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏**:
   ```bash
   npm install
   ```

3. **–ù–∞—Å—Ç—Ä–æ–∏—Ç—å API –∫–ª—é—á** (–≤—ã–±–µ—Ä–∏—Ç–µ –æ–¥–∏–Ω –∏–∑ —Å–ø–æ—Å–æ–±–æ–≤):

   **–°–ø–æ—Å–æ–± 1: –ß–µ—Ä–µ–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)**
   
   –°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env.local` –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞:
   ```env
   GEMINI_API_KEY=–≤–∞—à_api_–∫–ª—é—á_–∑–¥–µ—Å—å
   ```

   **–°–ø–æ—Å–æ–± 2: –ß–µ—Ä–µ–∑ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é**
   
   –û—Ç–∫—Ä–æ–π—Ç–µ `vite.config.ts` –∏ –∑–∞–º–µ–Ω–∏—Ç–µ –¥–µ—Ñ–æ–ª—Ç–Ω—ã–π –∫–ª—é—á –Ω–∞ —Å–≤–æ–π:
   ```typescript
   'process.env.DEFAULT_GEMINI_API_KEY': JSON.stringify('–≤–∞—à_api_–∫–ª—é—á_–∑–¥–µ—Å—å')
   ```

   **–°–ø–æ—Å–æ–± 3: –î–ª—è GitHub Actions (–¥–µ–ø–ª–æ–π)**
   
   –î–æ–±–∞–≤—å—Ç–µ —Å–µ–∫—Ä–µ—Ç `DEFAULT_GEMINI_API_KEY` –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è:
   - GitHub ‚Üí Settings ‚Üí Secrets and variables ‚Üí Actions
   - New repository secret: `DEFAULT_GEMINI_API_KEY`

4. **–ó–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ**:
   ```bash
   npm run dev
   ```

   –û—Ç–∫—Ä–æ–π—Ç–µ [http://localhost:3000](http://localhost:3000)

## üì¶ –î–µ–ø–ª–æ–π

### Azure Static Web Apps (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π)

–ü—Ä–æ–µ–∫—Ç –Ω–∞—Å—Ç—Ä–æ–µ–Ω –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –¥–µ–ø–ª–æ—è —á–µ—Ä–µ–∑ GitHub Actions –ø—Ä–∏ –ø—É—à–µ –≤ –≤–µ—Ç–∫—É `gemini`.

1. –î–æ–±–∞–≤—å—Ç–µ —Å–µ–∫—Ä–µ—Ç `DEFAULT_GEMINI_API_KEY` –≤ GitHub (—Å–º. –≤—ã—à–µ)
2. –°–¥–µ–ª–∞–π—Ç–µ push –≤ –≤–µ—Ç–∫—É `gemini`:
   ```bash
   git push origin gemini
   ```
3. GitHub Actions –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–±–µ—Ä—ë—Ç –∏ –∑–∞–¥–µ–ø–ª–æ–∏—Ç –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ

### –†—É—á–Ω–∞—è —Å–±–æ—Ä–∫–∞

```bash
npm run build
```

–°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ñ–∞–π–ª—ã –±—É–¥—É—Ç –≤ –ø–∞–ø–∫–µ `dist/`.

## üîß –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### –ú–æ–¥–µ–ª–∏ Gemini

**STT (Speech-to-Text)**:
- –ú–æ–¥–µ–ª—å: `gemini-2.5-flash-native-audio-preview`
- –ú–µ—Ç–æ–¥: SDK `live.connect()` —á–µ—Ä–µ–∑ Live API
- –ß–∞—Å—Ç–æ—Ç–∞: 16kHz PCM
- –ó–∞–¥–µ—Ä–∂–∫–∞: –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è (real-time streaming)
- –°–µ—Ä–≤–∏—Å: `services/liveTranscriptionService.ts`

**TTS (Text-to-Speech)**:
- –ú–æ–¥–µ–ª—å: `gemini-2.5-flash-preview-tts`
- –ì–æ–ª–æ—Å: **Kore** (–∂–µ–Ω—Å–∫–∏–π, —á—ë—Ç–∫–∏–π –≥–æ–ª–æ—Å)
- –§–æ—Ä–º–∞—Ç: 24kHz PCM

–î–ª—è —Å–º–µ–Ω—ã –≥–æ–ª–æ—Å–∞ –æ—Ç–∫—Ä–æ–π—Ç–µ `services/voiceService.ts` –∏ –∏–∑–º–µ–Ω–∏—Ç–µ `voiceName`:

```typescript
speechConfig: {
  voiceConfig: {
    prebuiltVoiceConfig: { voiceName: 'Puck' }, // –∏–ª–∏ –¥—Ä—É–≥–æ–π –≥–æ–ª–æ—Å
  },
}
```

–î–æ—Å—Ç—É–ø–Ω—ã–µ –≥–æ–ª–æ—Å–∞: Zephyr, Puck, Charon, Kore, Fenrir, Leda, Orus, Aoede, Callirrhoe, Autonoe, Enceladus, Iapetus –∏ –¥—Ä—É–≥–∏–µ ([–ø–æ–ª–Ω—ã–π —Å–ø–∏—Å–æ–∫](https://ai.google.dev/gemini-api/docs/speech-generation?hl=ru#voice-options)).

### N8N Backend

–î–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å n8n –∏–∑–º–µ–Ω–∏—Ç–µ `constants.ts`:

```typescript
export const BACKEND_API_URL = 'https://your-n8n-instance.com/webhook/...';
export const USE_MOCK_BACKEND = false; // –æ—Ç–∫–ª—é—á–∏—Ç—å –º–æ–∫–æ–≤—ã–π —Ä–µ–∂–∏–º
```

## üåø –í–µ—Ç–∫–∏ –ø—Ä–æ–µ–∫—Ç–∞

–ü—Ä–æ–µ–∫—Ç –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –¥–≤–µ –æ—Å–Ω–æ–≤–Ω—ã–µ –≤–µ—Ç–∫–∏ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–π:

| –í–µ—Ç–∫–∞ | TTS –î–≤–∏–∂–æ–∫ | STT –î–≤–∏–∂–æ–∫ | API –ö–ª—é—á | –í–µ—Ä—Å–∏—è | –°—Ç–∞—Ç—É—Å |
|-------|-----------|-----------|----------|--------|--------|
| **`gemini`** | Gemini 2.5 Flash TTS | **Gemini Live API (native-audio-preview)** | `DEFAULT_GEMINI_API_KEY` | v1.4.0 | ‚úÖ –ê–∫—Ç–∏–≤–Ω–∞—è |
| **`main`** | Web Speech API | OpenRouter API | `OPENROUTER_API_KEY` | v0.5.0 | ‚úÖ –°—Ç–∞–±–∏–ª—å–Ω–∞—è |

**–ü–æ–¥—Ä–æ–±–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è**: –°–º. [BRANCHES.md](BRANCHES.md) –¥–ª—è –ø–æ–ª–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Å—Ç—Ä—É–∫—Ç—É—Ä–µ –≤–µ—Ç–æ–∫.

### –ë—ã—Å—Ç—Ä–æ–µ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ:

```bash
# Gemini –≤–µ—Ä—Å–∏—è (—Ç–µ–∫—É—â–∞—è, –ª—É—á—à–µ–µ –∫–∞—á–µ—Å—Ç–≤–æ TTS)
git checkout gemini
npm install && npm run dev

# OpenRouter –≤–µ—Ä—Å–∏—è (–∫—Ä–æ—Å—Å-–ø–ª–∞—Ç—Ñ–æ—Ä–º–µ–Ω–Ω–∞—è)
git checkout main
npm install && npm run dev
```

## üìñ –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- [Google Gemini TTS Documentation](https://ai.google.dev/gemini-api/docs/speech-generation?hl=ru)
- [Google Gemini API Key](https://aistudio.google.com/apikey)
- [Telegram Mini Apps](https://core.telegram.org/bots/webapps)

## üîë –ì–¥–µ –≤—Å—Ç–∞–≤–∏—Ç—å API –∫–ª—é—á?

**–î–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏:**
1. –°–æ–∑–¥–∞–π—Ç–µ `.env.local` –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞
2. –î–æ–±–∞–≤—å—Ç–µ —Å—Ç—Ä–æ–∫—É: `API_KEY=–≤–∞—à_–Ω–æ–≤—ã–π_api_–∫–ª—é—á_–∏–∑_google_ai_studio`

**–î–ª—è –¥–µ–ø–ª–æ—è –Ω–∞ GitHub:**
1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ Settings ‚Üí Secrets ‚Üí Actions
2. –°–æ–∑–¥–∞–π—Ç–µ —Å–µ–∫—Ä–µ—Ç `DEFAULT_GEMINI_API_KEY` —Å–æ –∑–Ω–∞—á–µ–Ω–∏–µ–º –≤–∞—à–µ–≥–æ –∫–ª—é—á–∞

**–î–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ —Ç–µ—Å—Ç–∞ (–ù–ï —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞):**
1. –û—Ç–∫—Ä–æ–π—Ç–µ `vite.config.ts`
2. –ó–∞–º–µ–Ω–∏—Ç–µ –∑–Ω–∞—á–µ–Ω–∏–µ –≤ —Å—Ç—Ä–æ–∫–µ `'process.env.DEFAULT_GEMINI_API_KEY'`

## üìù –õ–∏—Ü–µ–Ω–∑–∏—è

MIT
